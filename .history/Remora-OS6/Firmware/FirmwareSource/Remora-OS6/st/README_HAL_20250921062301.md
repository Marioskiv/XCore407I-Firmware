# STM32CubeF4 HAL / CMSIS Integration (Lean Subset)

Copy the following directories from the official STM32CubeF4 package into `st/Drivers/` maintaining their internal structure:

Required (minimum for current firmware: RCC, GPIO, ETH, TIM, PWR, FLASH, DMA, CORTEX):
- `Drivers/CMSIS/Include` -> `st/Drivers/CMSIS/Include`
- `Drivers/CMSIS/Device/ST/STM32F4xx/Include` -> `st/Drivers/CMSIS/Device/ST/STM32F4xx/Include`
- `Drivers/STM32F4xx_HAL_Driver/Inc` -> `st/Drivers/STM32F4xx_HAL_Driver/Inc`
- `Drivers/STM32F4xx_HAL_Driver/Src` -> `st/Drivers/STM32F4xx_HAL_Driver/Src`

Optional (not yet needed):
- USB OTG / PCD sources
- FSMC/FMC, SDIO, ADC, SPI, I2C, USART, etc.

After copying, ensure the following HAL source files are present in `Src/` (only these will be compiled initially):
```
stm32f4xx_hal.c
stm32f4xx_hal_rcc.c
stm32f4xx_hal_rcc_ex.c
stm32f4xx_hal_gpio.c
stm32f4xx_hal_cortex.c
stm32f4xx_hal_pwr.c
stm32f4xx_hal_pwr_ex.c
stm32f4xx_hal_flash.c
stm32f4xx_hal_flash_ex.c
stm32f4xx_hal_dma.c
stm32f4xx_hal_eth.c
stm32f4xx_hal_tim.c
stm32f4xx_hal_tim_ex.c
```
Add further modules if linker errors appear for missing symbols.

`stm32f4xx_hal_conf.h` is provided under `st/hal_conf/` and included by adding that directory to the include path.

If you later enable USB, NAND/FSMC, or other peripherals, add the matching HAL sources and enable their macros in `stm32f4xx_hal_conf.h`.
